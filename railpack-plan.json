{
  "build": {
    "steps": [
      {
        "name": "Install PHP extensions",
        "run": "install-php-extensions ctype curl dom fileinfo filter hash mbstring openssl pcre pdo session tokenizer xml grpc"
      },
      {
        "name": "Composer install",
        "run": "composer install --optimize-autoloader --no-scripts --no-interaction"
      },
      {
        "name": "Install Node modules",
        "run": "npm ci"
      },
      {
        "name": "Prune dev modules",
        "run": "npm prune --omit=dev --ignore-scripts"
      },
      {
        "name": "Build assets",
        "run": "npm run build"
      },
      {
        "name": "Laravel cache optimizations",
        "run": "php artisan config:cache && php artisan route:cache && php artisan view:cache && php artisan event:cache"
      }
    ]
  },
  "deploy": {
    "run": "/start-container.sh"
  }
}
